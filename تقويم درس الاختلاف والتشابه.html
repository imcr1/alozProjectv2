<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…ØªÙ…Ø§Ø«Ù„ ÙˆØ§Ù„Ù…Ø®ØªÙ„Ù</title>
<style>
  body {
    font-family: Arial, sans-serif;
    direction: rtl;
    text-align: center;
    background: #f5f8ff;
    margin: 0;
    padding: 20px;
  }
  h1 {
    margin-top: 10px;
  }
  #question {
    margin-top: 10px;
    font-size: 22px;
  }
  #game-area {
    margin-top: 25px;
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
  }
  .item {
    width: 90px;
    height: 90px;
    font-size: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #ffffff;
    border-radius: 15px;
    border: 3px solid transparent;
    cursor: pointer;
    transition: 0.2s;
  }
  .item:hover {
    transform: scale(1.07);
  }
  #options {
    margin-top: 20px;
  }
  .btn {
    padding: 10px 20px;
    margin: 5px;
    border-radius: 10px;
    border: none;
    font-size: 18px;
    cursor: pointer;
  }
  .btn-secondary {
    background: #ecf0f1;
    color: #2c3e50;
  }
  #message {
    margin-top: 20px;
    font-size: 22px;
    font-weight: bold;
  }
  .correct { color: #27ae60; }
  .wrong   { color: #e74c3c; }
</style>
</head>
<body>

<h1>ğŸ® Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…ØªÙ…Ø§Ø«Ù„ ÙˆØ§Ù„Ù…Ø®ØªÙ„Ù</h1>
<p id="instruction">Ø¬Ø§ÙˆØ¨ Ø¹Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø©ØŒ ÙˆØ³ØªÙ†ØªÙ‚Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©.</p>

<div id="question"></div>
<div id="game-area"></div>
<div id="options"></div>
<div id="message"></div>

<script>
// ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
const levels = [
  { // 1: ØµÙØ¯ Ø§Ù„Ù…Ø®ØªÙ„Ù
    type: "find-different",
    question: "Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©:",
    items: ["ğŸ","ğŸ","ğŸ","ğŸŒ"]
  },
  { // 2: ØµÙØ¯ Ø§Ù„Ù…Ø®ØªÙ„Ù
    type: "find-different",
    question: "Ø£ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø®ØªÙ„ÙØ© Ø¨ÙŠÙ† Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¬ÙˆÙ‡ØŸ",
    items: ["ğŸ˜€","ğŸ˜€","ğŸ˜€","ğŸ˜¢"]
  },
  { // 3: Ù…ØªÙ…Ø§Ø«Ù„ Ø£Ùˆ Ù…Ø®ØªÙ„ÙØŸ
    type: "same-or-different",
    question: "Ù‡Ù„ Ù‡Ø§ØªØ§Ù† Ø§Ù„ØµÙˆØ±ØªØ§Ù† Ù…ØªÙ…Ø§Ø«Ù„ØªØ§Ù† Ø£Ù… Ù…Ø®ØªÙ„ÙØªØ§Ù†ØŸ",
    pair: ["âš½","âš½"],
    answer: "same"
  },
  { // 4: Ù…ØªÙ…Ø§Ø«Ù„ Ø£Ùˆ Ù…Ø®ØªÙ„ÙØŸ
    type: "same-or-different",
    question: "Ù‡Ù„ Ù‡Ø§ØªØ§Ù† Ø§Ù„ØµÙˆØ±ØªØ§Ù† Ù…ØªÙ…Ø§Ø«Ù„ØªØ§Ù† Ø£Ù… Ù…Ø®ØªÙ„ÙØªØ§Ù†ØŸ",
    pair: ["ğŸ±","ğŸ¶"],
    answer: "different"
  },
  { // 5: ÙƒÙˆÙ‘Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…ØªÙ…Ø§Ø«Ù„Ø©
    type: "make-group",
    question: "Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ØªÙ…Ø§Ø«Ù„Ø© :",
    model: "ğŸ“",
    options: ["ğŸ","ğŸ“","ğŸŒ","ğŸ“"]
  },
  { // 6: ÙƒÙˆÙ‘Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…ØªÙ…Ø§Ø«Ù„Ø©
    type: "make-group",
    question: "Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ØªÙ…Ø§Ø«Ù„Ø© :",
    model: "ğŸš—",
    options: ["ğŸš—","ğŸšŒ","ğŸš²","ğŸš—","ğŸš—"]
  }
];

let currentLevel = 0;
let selectedIndexes = [];
let modelSelected = false;

const questionDiv = document.getElementById("question");
const gameArea    = document.getElementById("game-area");
const optionsDiv  = document.getElementById("options");
const messageDiv  = document.getElementById("message");

function clearUI() {
  questionDiv.textContent = "";
  gameArea.innerHTML = "";
  optionsDiv.innerHTML = "";
  messageDiv.textContent = "";
  messageDiv.className = "";
  selectedIndexes = [];
  modelSelected = false;
}

function goNextLevel() {
  currentLevel++;
  if (currentLevel >= levels.length) {
    showCongratulations();
  } else {
    setTimeout(loadLevel, 800);
  }
}

function showCongratulations() {
  clearUI();
  questionDiv.textContent = "ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø£Ù†Ù‡ÙŠØª Ø¬Ù…ÙŠØ¹ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©.";
  messageDiv.textContent = "Ø±Ø§Ø¦Ø¹! Ø£Ù†Øª Ø¨Ø·Ù„ Ø§Ù„Ù…ØªÙ…Ø§Ø«Ù„ ÙˆØ§Ù„Ù…Ø®ØªÙ„Ù ğŸ‘ Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨ ÙˆØ§Ù„ØªØ¹Ù„Ù‘Ù….";
  messageDiv.className = "correct";

  const replayBtn = document.createElement("button");
  replayBtn.className = "btn btn-secondary";
  replayBtn.textContent = "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨ ğŸ”";
  replayBtn.onclick = () => {
    currentLevel = 0;
    loadLevel();
  };
  optionsDiv.appendChild(replayBtn);
}

function loadLevel() {
  clearUI();
  const level = levels[currentLevel];
  questionDiv.textContent = level.question;

  if (level.type === "find-different")      renderFindDifferent(level);
  else if (level.type === "same-or-different") renderSameOrDifferent(level);
  else if (level.type === "make-group")     renderMakeGroup(level);
}

// 1) ØµÙØ¯ Ø§Ù„Ù…Ø®ØªÙ„Ù
function renderFindDifferent(level) {
  level.items.forEach(icon => {
    const div = document.createElement("div");
    div.className = "item";
    div.textContent = icon;

    const isDifferent = (icon !== level.items[0]);

    div.onclick = function() {
      if (isDifferent) {
        messageDiv.textContent = "âœ”ï¸ Ø£Ø­Ø³Ù†Øª! Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø© Ù…Ø®ØªÙ„ÙØ© Ø¹Ù† Ø§Ù„Ø¨Ø§Ù‚ÙŠ.";
        messageDiv.className = "correct";
        goNextLevel();
      } else {
        messageDiv.textContent = "âŒ Ù„ÙŠØ³Øª Ù…Ø®ØªÙ„ÙØ©ØŒ Ø¬Ø±Ù‘Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
        messageDiv.className = "wrong";
      }
    };

    gameArea.appendChild(div);
  });
}

// 2) Ù…ØªÙ…Ø§Ø«Ù„ Ø£Ùˆ Ù…Ø®ØªÙ„ÙØŸ
function renderSameOrDifferent(level) {
  level.pair.forEach(icon => {
    const div = document.createElement("div");
    div.className = "item";
    div.textContent = icon;
    gameArea.appendChild(div);
  });

  const sameBtn = document.createElement("button");
  sameBtn.className = "btn btn-secondary";
  sameBtn.textContent = "Ù…ØªÙ…Ø§Ø«Ù„";

  const diffBtn = document.createElement("button");
  diffBtn.className = "btn btn-secondary";
  diffBtn.textContent = "Ù…Ø®ØªÙ„Ù";

  sameBtn.onclick = () => checkSameDifferent(level, "same");
  diffBtn.onclick = () => checkSameDifferent(level, "different");

  optionsDiv.appendChild(sameBtn);
  optionsDiv.appendChild(diffBtn);
}

function checkSameDifferent(level, choice) {
  if (choice === level.answer) {
    messageDiv.textContent = "âœ”ï¸ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©.";
    messageDiv.className = "correct";
    goNextLevel();
  } else {
    messageDiv.textContent = "âŒ Ø¥Ø¬Ø§Ø¨Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
    messageDiv.className = "wrong";
  }
}

// 3) ÙƒÙˆÙ‘Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…ØªÙ…Ø§Ø«Ù„Ø© 
function renderMakeGroup(level) {
  const modelLabel = document.createElement("div");
  modelLabel.textContent = "Ø§Ù„Ù†Ù…ÙˆØ°Ø¬:";

  const modelItem = document.createElement("div");
  modelItem.className = "item";
  modelItem.textContent = level.model;

  modelItem.onclick = function () {
    modelSelected = !modelSelected;
    modelItem.style.borderColor = modelSelected ? "#3498db" : "transparent";
  };

  const modelWrapper = document.createElement("div");
  modelWrapper.style.display = "flex";
  modelWrapper.style.justifyContent = "center";
  modelWrapper.style.alignItems = "center";
  modelWrapper.style.gap = "15px";
  modelWrapper.style.marginBottom = "15px";
  modelWrapper.appendChild(modelLabel);
  modelWrapper.appendChild(modelItem);
  gameArea.appendChild(modelWrapper);

  level.options.forEach((icon, index) => {
    const div = document.createElement("div");
    div.className = "item";
    div.textContent = icon;

    div.onclick = function () {
      if (selectedIndexes.includes(index)) {
        selectedIndexes = selectedIndexes.filter(i => i !== index);
        div.style.borderColor = "transparent";
      } else {
        selectedIndexes.push(index);
        div.style.borderColor = "#3498db";
      }
    };

    gameArea.appendChild(div);
  });

  const checkBtn = document.createElement("button");
  checkBtn.className = "btn btn-secondary";
  checkBtn.textContent = "ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©";
  checkBtn.onclick = () => checkMakeGroup(level);

  optionsDiv.appendChild(checkBtn);
}

function arraysEqual(a, b) {
  if (a.length !== b.length) return false;
  const A = [...a].sort();
  const B = [...b].sort();
  for (let i = 0; i < A.length; i++) {
    if (A[i] !== B[i]) return false;
  }
  return true;
}

function checkMakeGroup(level) {
  const targetIndexes = [];
  level.options.forEach((icon, index) => {
    if (icon === level.model) targetIndexes.push(index);
  });

  const optionsOk = arraysEqual(selectedIndexes, targetIndexes);
  const modelOk   = modelSelected;

  if (optionsOk && modelOk) {
    messageDiv.textContent = "âœ”ï¸ Ø£Ø­Ø³Ù†Øª! Ø§Ø®ØªØ±Øª ÙƒÙ„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ØªÙ…Ø§Ø«Ù„Ø©.";
    messageDiv.className = "correct";
    goNextLevel();
  } else {
    messageDiv.textContent = "âŒ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø·Ø£ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± ÙƒÙ„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ØªØ·Ø§Ø¨Ù‚Ø©.";
    messageDiv.className = "wrong";
  }
}

// Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
loadLevel();
</script>

</body>
</html>
