<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù„Ø¹Ø¨Ø© Ø£ÙƒØ«Ø± Ù…Ù† Ùˆ Ø£Ù‚Ù„ Ù…Ù† Ø¨Ø§Ù„ØªÙ‚Ø§Ø¨Ù„ 1:1</title>
<style>
  body {
    font-family: Arial, sans-serif;
    direction: rtl;
    text-align: center;
    background: #f5f8ff;
    margin: 0;
    padding: 20px;
  }
  h1 { margin-top: 10px; }
  #question { margin-top: 10px; font-size: 22px; }
  #game-area {
    margin-top: 25px;
    display: flex;
    justify-content: center;
    gap: 40px;
    flex-wrap: wrap;
  }
  .group {
    background: #ffffff;
    padding: 15px;
    border-radius: 16px;
    border: 3px solid #d0d7ff;
    min-width: 220px;
    cursor: pointer;
    transition: 0.2s;
  }
  .group.clickable:hover {
    transform: scale(1.05);
    border-color: #82a0ff;
  }
  .group-title {
    font-size: 18px;
    margin-bottom: 10px;
    font-weight: bold;
  }
  .items-row {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 6px;
    min-height: 60px;
    margin-bottom: 6px;
  }
  .item {
    width: 40px;
    height: 40px;
    font-size: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fdfefe;
    border-radius: 10px;
    border: 2px solid #e0e4ff;
  }
  #message {
    margin-top: 20px;
    font-size: 22px;
    font-weight: bold;
  }
  .correct { color: #27ae60; }
  .wrong   { color: #e74c3c; }
  .btn {
    padding: 10px 20px;
    margin: 5px;
    border-radius: 10px;
    border: none;
    font-size: 18px;
    cursor: pointer;
  }
  .btn-main { background: #3498db; color: white; }
  .btn-light { background: #ecf0f1; color: #2c3e50; }
</style>
</head>
<body>

<h1>ğŸ® Ù„Ø¹Ø¨Ø© Ø£ÙƒØ«Ø± Ù…Ù† Ùˆ Ø£Ù‚Ù„ Ù…Ù†</h1>
<p id="instruction">Ø¬Ø§ÙˆØ¨ Ø¹Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø©ØŒ ÙˆØ³ØªÙ†ØªÙ‚Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©.</p>

<div id="question"></div>
<div id="game-area"></div>
<div id="controls"></div>
<div id="message"></div>

<script>
// Ø§Ù„Ø¢Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© ÙÙ‚Ø· Ø¨Ù†ÙˆØ¹ÙŠÙ†: choose Ùˆ build
const levels = [
  { type: "choose", mode: "more", left: 2, right: 5, icon: "ğŸ" },
  { type: "choose", mode: "less", left: 6, right: 3, icon: "âš½" },
  { type: "build", mode: "more", base: 3, icon: "ğŸ“" },
  { type: "build", mode: "less", base: 5, icon: "ğŸš—" },
  { type: "choose", mode: "more", left: 4, right: 7, icon: "ğŸŸ" },
  { type: "build", mode: "more", base: 4, icon: "â­" }
];

let currentLevel = 0;
let canAnswer = true;

const questionDiv = document.getElementById("question");
const gameArea    = document.getElementById("game-area");
const messageDiv  = document.getElementById("message");
const controlsDiv = document.getElementById("controls");

function clearUI() {
  questionDiv.textContent = "";
  gameArea.innerHTML = "";
  controlsDiv.innerHTML = "";
  messageDiv.textContent = "";
  messageDiv.className = "";
  canAnswer = true;
}

function goNextLevel() {
  currentLevel++;
  if (currentLevel >= levels.length) {
    showCongratulations();
  } else {
    setTimeout(loadLevel, 900);
  }
}

function showCongratulations() {
  clearUI();
  questionDiv.textContent = "ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø£Ù†Ù‡ÙŠØª Ø¬Ù…ÙŠØ¹ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©.";
  messageDiv.textContent  = "Ø±Ø§Ø¦Ø¹! Ø£Ù†Øª Ø®Ø¨ÙŠØ± ÙÙŠ Ø§Ù„ØªÙ…ÙŠÙŠØ² Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± ÙˆØ§Ù„Ø£Ù‚Ù„ Ø¹Ø¯Ø¯Ù‹Ø§ ğŸ‘ Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨!";
  messageDiv.className    = "correct";

  const replayBtn = document.createElement("button");
  replayBtn.className = "btn btn-main";
  replayBtn.textContent = "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨ ğŸ”";
  replayBtn.onclick = () => {
    currentLevel = 0;
    loadLevel();
  };
  controlsDiv.appendChild(replayBtn);
}

function loadLevel() {
  clearUI();
  const level = levels[currentLevel];

  // Ù†ÙˆØ¹ Ø§Ù„Ø³Ø¤Ø§Ù„
  if (level.type === "choose") {
    if (level.mode === "more") questionDiv.textContent = "Ø£ÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© ÙÙŠÙ‡Ø§ Ø¹Ù†Ø§ØµØ± Ø£ÙƒØ«Ø± Ø¹Ø¯Ø¯Ù‹Ø§ØŸ";
    else questionDiv.textContent = "Ø£ÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© ÙÙŠÙ‡Ø§ Ø¹Ù†Ø§ØµØ± Ø£Ù‚Ù„ Ø¹Ø¯Ø¯Ù‹Ø§ØŸ";

    renderChoose(level);
  }

  else if (level.type === "build") {
    if (level.mode === "more") questionDiv.textContent = "ÙƒÙˆÙ‘Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© Ø«Ø§Ù†ÙŠØ© ÙÙŠÙ‡Ø§ Ø¹Ù†Ø§ØµØ± Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬.";
    else questionDiv.textContent = "ÙƒÙˆÙ‘Ù† Ù…Ø¬Ù…ÙˆØ¹Ø© Ø«Ø§Ù†ÙŠØ© ÙÙŠÙ‡Ø§ Ø¹Ù†Ø§ØµØ± Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬.";

    renderBuild(level);
  }
}

/* --------- Ù†ÙˆØ¹ 1: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© --------- */
function renderChoose(level) {
  createStaticGroup("Ù…Ø¬Ù…ÙˆØ¹Ø© Ù¡", "left",  level.left,  level.icon, level, true);
  createStaticGroup("Ù…Ø¬Ù…ÙˆØ¹Ø© Ù¢", "right", level.right, level.icon, level, true);
}

function createStaticGroup(title, side, count, icon, level, clickable) {
  const group = document.createElement("div");
  group.className = "group";
  if (clickable) group.classList.add("clickable");

  const label = document.createElement("div");
  label.className = "group-title";
  label.textContent = title;
  group.appendChild(label);

  const row = document.createElement("div");
  row.className = "items-row";

  for (let i = 0; i < count; i++) {
    const cell = document.createElement("div");
    cell.className = "item";
    cell.textContent = icon;
    row.appendChild(cell);
  }

  group.appendChild(row);

  group.onclick = function () {
    if (!canAnswer || !clickable) return;
    handleChooseAnswer(side, level);
  };

  gameArea.appendChild(group);
}

function handleChooseAnswer(side, level) {
  const left  = level.left;
  const right = level.right;
  let correctSide;

  if (level.mode === "more") correctSide = left > right ? "left" : "right";
  else                       correctSide = left < right ? "left" : "right";

  if (side === correctSide) {
    messageDiv.textContent = "âœ”ï¸ Ø£Ø­Ø³Ù†Øª! Ø§Ø®ØªÙŠØ§Ø±Ùƒ ØµØ­ÙŠØ­.";
    messageDiv.className   = "correct";
    canAnswer = false;
    goNextLevel();
  } else {
    messageDiv.textContent = "âŒ Ø¥Ø¬Ø§Ø¨Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
    messageDiv.className   = "wrong";
  }
}

/* --------- Ù†ÙˆØ¹ 2: Ø¨Ù†Ø§Ø¡ Ù…Ø¬Ù…ÙˆØ¹Ø© --------- */
function renderBuild(level) {
  const modelGroup = document.createElement("div");
  modelGroup.className = "group";

  const modelLabel = document.createElement("div");
  modelLabel.className = "group-title";
  modelLabel.textContent = "Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬";
  modelGroup.appendChild(modelLabel);

  const modelRow = document.createElement("div");
  modelRow.className = "items-row";
  for (let i = 0; i < level.base; i++) {
    const cell = document.createElement("div");
    cell.className = "item";
    cell.textContent = level.icon;
    modelRow.appendChild(cell);
  }
  modelGroup.appendChild(modelRow);
  gameArea.appendChild(modelGroup);

  const studentGroup = document.createElement("div");
  studentGroup.className = "group";

  const stuLabel = document.createElement("div");
  stuLabel.className = "group-title";
  stuLabel.textContent = "Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØªÙ„Ù…ÙŠØ°";
  studentGroup.appendChild(stuLabel);

  const stuRow = document.createElement("div");
  stuRow.className = "items-row";
  studentGroup.appendChild(stuRow);

  gameArea.appendChild(studentGroup);

  let count = 0;

  function updateRow() {
    stuRow.innerHTML = "";
    for (let i = 0; i < count; i++) {
      const cell = document.createElement("div");
      cell.className = "item";
      cell.textContent = level.icon;
      stuRow.appendChild(cell);
    }
  }

  const addBtn = document.createElement("button");
  addBtn.className = "btn btn-main";
  addBtn.textContent = "Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ±";
  addBtn.onclick = () => {
    if (count < 12) count++;
    updateRow();
  };

  const removeBtn = document.createElement("button");
  removeBtn.className = "btn btn-light";
  removeBtn.textContent = "Ø­Ø°Ù Ø¹Ù†ØµØ±";
  removeBtn.onclick = () => {
    if (count > 0) count--;
    updateRow();
  };

  const checkBtn = document.createElement("button");
  checkBtn.className = "btn btn-light";
  checkBtn.textContent = "ØªØ­Ù‚Ù‘Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©";
  checkBtn.onclick = () => {
    handleBuildCheck(level, count);
  };

  controlsDiv.appendChild(addBtn);
  controlsDiv.appendChild(removeBtn);
  controlsDiv.appendChild(checkBtn);
}

function handleBuildCheck(level, count) {
  let ok = false;
  if (level.mode === "more") ok = count > level.base;
  else                      ok = count < level.base;

  if (ok) {
    messageDiv.textContent = "âœ”ï¸ Ø£Ø­Ø³Ù†Øª! Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø°ÙŠ ÙƒÙˆÙ‘Ù†ØªÙ‡ ØµØ­ÙŠØ­.";
    messageDiv.className   = "correct";
    goNextLevel();
  } else {
    messageDiv.textContent = "âŒ Ø§Ù„Ø¹Ø¯Ø¯ Ù„Ø§ ÙŠØ­Ù‚Ù‚ Ø§Ù„Ø´Ø±Ø·. Ø­Ø§ÙˆÙ„ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ø¯Ø¯.";
    messageDiv.className   = "wrong";
  }
}

// Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
loadLevel();
</script>

</body>
</html>
